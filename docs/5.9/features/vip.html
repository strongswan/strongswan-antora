<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Virtual IP Addresses :: strongSwan Documentation</title>
    <link rel="canonical" href="https://docs.strongswan.org/docs/5.9/features/vip.html">
    <link rel="prev" href="../config/IPv6Ndp.html">
    <link rel="next" href="mobike.html">
    <meta name="generator" content="Antora 3.0.1">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/site-extra.css">
    <meta name="google-site-verification" content="pFYsGHXifqmasGBdCNNgzV4OxVDn2d3Zm0DK9WUYCl0" />
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://docs.strongswan.org">strongSwan Documentation</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://docs.strongswan.org">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Sites</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://strongswan.org">strongswan.org</a>
             <a class="navbar-item" href="https://github.com/strongswan/strongswan">Source Repository</a>
            <a class="navbar-item" href="https://github.com/strongswan/strongswan-docs">AsciiDoc Repository</a>
         </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://download.strongswan.org">Downloads</a>
            <a class="navbar-item" href="https://lists.strongswan.org/">Mailing Lists</a>
            <a class="navbar-item" href="https://tnc.strongswan.org">strongTNC</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="5.9">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">strongSwan Docs</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../install/install.html">Installation Documentation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../install/autoconf.html">Autoconf Options</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../install/kernelModules.html">Required Kernel Modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../install/reducedPrivileges.html">Reduced Privileges</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../install/trafficDumps.html">Taking Traffic Dumps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../config/config.html">Configuration Files</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/strongswanConf.html">strongswan.conf</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/strongswanDir.html">strongswan.d Directory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../swanctl/swanctlConf.html">swanctl.conf</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../swanctl/swanctlDir.html">swanctl Directory</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config/IKEv2CipherSuites.html">IKEv2 Cipher Suites</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config/identityParsing.html">Identity Parsing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config/jobPriority.html">Job Priority Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config/lookupTuning.html">Tuning IKE SA Lookup</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config/rekeying.html">IKE and IPsec SA Renewal</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config/retransmission.html">Retransmission</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config/sqliteDbSchema.html">SQLite Database Schema</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config/IPv6Ndp.html">IPv6 and the Neighbor Discovery Protocol</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Features</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="vip.html">Virtual IP Addresses</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="mobike.html">MOBIKE</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="natTraversal.html">NAT Traversal</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ipcomp.html">IPComp</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="networkManager.html">NetworkManager</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="routeBasedVpn.html">Route-based VPN</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="highAvailability.html">High Availability</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="hashAndUrl.html">Hash and URL</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="integrityTests.html">Integrity Tests</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ietf.html">IPsec and Related Standards</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Howtos</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config/quickstart.html">Configuration Quickstart</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pki/pkiQuickstart.html">Certificates Quickstart</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../howtos/introduction.html">Introduction to strongSwan</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../howtos/forwarding.html">Forwarding and Split-Tunneling</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../howtos/securityRecommendations.html">Security Recommendations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../howtos/smartcards.html">Smart Card Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../howtos/cloudPlatforms.html">Cloud Platforms</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../howtos/nameSpaces.html">strongSwan in Linux Network Namespaces</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Daemons</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../daemons/charon.html">charon</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../daemons/charon-systemd.html">charon-systemd</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../daemons/charon-svc.html">charon-svc</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../daemons/charon-cmd.html">charon-cmd</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">OS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../os/android.html">Android</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../os/androidVpnClient.html">Android VPN Client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../os/androidVpnClientProfiles.html">Android VPN Client Profiles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../os/androidVpnClientPrivacyPolicy.html">Android VPN Privacy Policy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../os/androidVpnClientBuild.html">Android VPN Client Build</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../os/windows.html">Windows</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../os/freebsd.html">FreeBSD</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../os/macos.html">macOS</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Interoperability</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../interop/windowsClients.html">Windows Clients</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../interop/windowsCertRequirements.html">Windows Certificate Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../interop/windowsClients.html#_using_x_509_machine_certificates">Using Machine Certificates</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsMachineCert.html">Storing a Windows Machine Certificate</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsMachineConf.html">Windows Client Configuration with Machine Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsMachineConnect.html">Windows Client Connection with Machine Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsMachineServerConf.html">strongSwan Configuration for Windows Machine Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsMachineServerStatus.html">strongSwan Connection Status with Windows Machine Certificates</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../interop/windowsClients.html#_using_x_509_user_certificates">Using User Certificates</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsUserCert.html">Storing a Windows User Certificate</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsCaCert.html">Storing a Windows CA Certificate</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsUserConf.html">Windows Client Configuration with User Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsUserConnect.html">Windows Client Connection with User Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsUserServerConf.html">strongSwan Configuration for Windows User Certificates</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsUserServerStatus.html">strongSwan Connection Status with Windows User Certificates</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../interop/windowsClients.html#_using_passwords_with_eap_mschapv2">Using EAP</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsEapConf.html">Windows Client EAP Configuration with Passwords</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsEapConnect.html">Windows Client EAP Connection with Passwords</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsEapServerConf.html">strongSwan EAP Configuration with Passwords</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interop/windowsEapServerStatus.html">strongSwan EAP Connection Status with Passwords</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../interop/ios.html">iOS and macOS</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../interop/appleIkev2Profile.html">Apple IKEv2 Configuration Profile</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../interop/fortinet.html">Fortinet Devices</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tools</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../swanctl/swanctl.html">swanctl Tool</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../pki/pki.html">pki Tool</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tools/scepclient.html">scepclient Tool</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tnc/pt-tls-client.html">pt-tls-client Tool</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tnc/sw-collector.html">sw-collector Tool</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tnc/sec-updater.html">sec-updater Tool</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tools/pool.html">ipsec pool Tool</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tnc/attest.html">ipsec attest Tool</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tools/conftest.html">ipsec conftest Tool</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Plugins</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../plugins/plugins.html">Plugin List</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/addrblock.html">addrblock Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/attr.html">attr Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/attr-sql.html">attr-sql Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/bypass-lan.html">bypass-lan Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/certexpire.html">certexpire Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/connmark.html">connmark Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/constraints.html">constraints Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/counters.html">counters Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/coupling.html">coupling Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/curl.html">curl Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/dhcp.html">dhcp Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/duplicheck.html">duplicheck Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/eap-dynamic.html">eap-dynamic Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/eap-gtc.html">eap-gtc Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/eap-radius.html">eap-radius Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/eap-simaka-sql.html">eap-simaka-sql Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/eap-tls.html">eap-tls Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/error-notify.html">error-notify Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/ext-auth.html">ext-auth Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/farp.html">farp Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/forecast.html">forecast Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/ha.html">ha Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/kernel-iph.html">kernel-iph Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/kernel-libipsec.html">kernel-libipsec Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/kernel-wfp.html">kernel-wfp Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/load-tester.html">load-tester Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/lookip.html">lookip Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/pkcs11.html">pkcs11 Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/radattr.html">radattr Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/resolve.html">resolve Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/selinux.html">selinux Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/socket-win.html">socket-win Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/sql.html">sql Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/systime-fix.html">systime-fix Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/test-vectors.html">test-vectors Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/tnc-ifmap.html">tnc-ifmap Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/tpm.html">tpm Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/unity.html">unity Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/updown.html">updown Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/vici.html">vici Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/whitelist.html">whitelist Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/winhttp.html">winhttp Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/xauth-eap.html">xauth-eap Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/xauth-noauth.html">xauth-noauth Plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../plugins/xauth-pam.html">xauth-pam Plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../plugins/pluginLoad.html">Plugin Load Options</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Devs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../devs/devs.html">Developer Documentation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../devs/contributions.html">Contributions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../devs/programmingStyle.html">Programming Style</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../devs/objectOrientedC.html">Object Oriented C</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../devs/testingEnvironment.html">Testing Environment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../devs/fuzzing.html">Fuzzing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Platform Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tpm/tpm2.html">TPM 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tnc/tnc.html">Trusted Network Connect</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tnc/tncClient.html">TNC Client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tnc/tncServer.html">TNC Server</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tnc/optimumTncSizes.html">Optimum PB-TNC Batch and PA-TNC Message Sizes</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Support</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../support/helpRequests.html">Help Requests</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../support/faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../support/flawReporting.html">Flaw Reporting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../support/free.html">Free Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../support/commercial.html">Commercial Support</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">strongSwan Docs</span>
    <span class="version">5.9</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">strongSwan Docs</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">5.9</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">strongSwan Docs</a></li>
    <li>Features</li>
    <li><a href="vip.html">Virtual IP Addresses</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/strongswan/strongswan-docs/edit/master/docs/modules/ROOT/pages/features/vip.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Virtual IP Addresses</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>IKEv1 and IKEv2 both know the concept of <strong>virtual IP</strong> addresses. This means that
the initiator requests an additional IP address from the responder to use as the
inner IPsec tunnel address.</p>
</div>
<div class="paragraph">
<p>In IKEv1, virtual IPs are exchanged using the <code>ModeConfig</code> extension. IKEv2 has
full support for virtual IPs in the core standard using <code>CP</code> Configuration Payloads.</p>
</div>
<div class="paragraph">
<p>strongSwan currently implements one scenario with IKEv2 configuration payloads,
where a virtual IP address is requested by the <strong>initiator</strong> and one or several
IPv4 and/or IPv6 addresses are assigned from multiple pools by the <strong>responder</strong>.</p>
</div>
<div class="paragraph">
<p>An alterantive approach is possible by the IKEv2 protocol where the <strong>responder</strong>
would propose virtual IP addresses to the <strong>initiator</strong> but this is an uncommon
setup and therefore not supported. It is supported for IKEv1, though, with
<code>ModeConfig</code> in <code><strong>push</strong></code> mode.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_initiator_configuration"><a class="anchor" href="#_initiator_configuration"></a>Initiator Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To request an <strong>arbitrary</strong> virtual IP from the responder the client configures the
following in <a href="../swanctl/swanctlConf.html" class="xref page"><code><strong>swanctl.conf</strong></code></a>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 46.1538%;">
<col style="width: 53.8462%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">IPv4</th>
<th class="tableblock halign-left valign-top">IPv6</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connections.&lt;conn&gt;.vips = 0.0.0.0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connections.&lt;conn&gt;.vips = ::</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It is possible to request a specific address by setting:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 46.1538%;">
<col style="width: 53.8462%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">IPv4</th>
<th class="tableblock halign-left valign-top">IPv6</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connections.&lt;conn&gt;.vips = 10.3.0.5</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connections.&lt;conn&gt;.vips = 2001:db8::1</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>However the responder may return a <strong>different address</strong>, or may <strong>not return</strong> one
at all.</p>
</div>
<div class="paragraph">
<p>To use a <strong>specific and static</strong> virtual IP (i.e. without exchanging any
configuration payloads) it may simply be added to any local interface (even <code><strong>lo</strong></code>)
and referenced in the client&#8217;s local traffic selector (<code><strong>local_ts</strong></code>).
Configuring such an IP as in the example above will not have the intended effect
because the IP won&#8217;t get <a href="#_implementation">installed on the system</a> unless
the server actually assigns that IP to the client with a configuration payload.</p>
</div>
<div class="paragraph">
<p>The traffic selectors in <code><strong>local_ts</strong></code> and <code><strong>remote_ts</strong></code> default to the value
<code><strong>dynamic</strong></code>. If virtual IPs are used this value gets dynamically replaced by the
received or assigned virtual IP, respectively. Therefore, no local traffic selector
<strong>must be</strong> configured on the client and no remote traffic selector on the server
when using virtual IPs. This ensures the client&#8217;s traffic selector is correctly
narrowed to the assigned virtual IP.</p>
</div>
<div class="paragraph">
<p>A client may request <strong>multiple</strong> IP addresses by listing multiple IP addresses in
<code><strong>connections.&lt;conn&gt;.vips</strong></code>. The main use case is for dual-stack hosts to request
a virtual IP of each address family:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>connections.&lt;conn&gt;.vips = 0.0.0.0, ::</pre>
</div>
</div>
<div class="sect2">
<h3 id="_example"><a class="anchor" href="#_example"></a>Example</h3>
<div class="paragraph">
<p><span class="image"><a class="image" href="https://www.strongswan.org/testing/testresults/ikev2/ip-two-pools-v4v6"><img src="../_images/a-m-c-w.png" alt="topology" width="192" height="129" title="ip-two-pools-v4v6 example"></a></span>
strongSwan <a href="https://www.strongswan.org/testing/testresults/ikev2/ip-two-pools-v4v6">example</a> illustrates the use dual IPv4/IPv6 address pools.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dns_servers"><a class="anchor" href="#_dns_servers"></a>DNS servers</h3>
<div class="paragraph">
<p>VPN clients cannot explicitly request DNS servers via a special DNS option in
<a href="../swanctl/swanctl.html" class="xref page"><code><strong>swanctl.conf</strong></code></a>. But DNS server information received
from the VPN gateway through the <code>IKEv2</code> <code>CP</code> or <code>IKEv1</code> <code>ModeConfig</code> payloads
are handled for instance by the <a href="../plugins/resolve.html" class="xref page"><code><strong>resolve</strong></code></a> plugin
which in turn uses either the <code><strong>resolvconf(8)</strong></code> utility to add the DNS server
information on the host or write it directly to <code><strong>/etc/resolv.conf</code></strong> or to an
alternative file specified with the <code><strong>--with-resolve-conf</strong></code>
<a href="../install/autoconf.html#_with_options" class="xref page"><code><strong>./configure</strong></code></a> directive.</p>
</div>
</div>
<div class="sect2">
<h3 id="_implementation"><a class="anchor" href="#_implementation"></a>Implementation</h3>
<div class="paragraph">
<p>On Linux the virtual IP addresses will be installed on the outbound interface by
default. The interface may be changed with the <code><strong>charon.install_virtual_ip_on</strong></code>
option. Source routes will be installed in the routing table configured with
<code><strong>charon.routing_table</strong></code> in
<a href="../config/strongswanConf.html#_charon" class="xref page"><code><strong>strongswan.conf</strong></code></a> or via the
<a href="../install/autoconf.html#_with_options" class="xref page"><code><strong>./configure</strong></code></a> option
<code><strong>--with-routing-table</strong></code>. The source routes force the use of the virtual IP when
sending packets to the subnets defined as remote traffic selector (if the physical
IP were used, the IPsec policies wouldn&#8217;t match and the packets wouldn&#8217;t get
tunneled).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_responder_configuration"><a class="anchor" href="#_responder_configuration"></a>Responder Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As already documented above, the remote traffic selector <code><strong>remote_ts</strong></code> defaults
to the value <code><strong>dynamic</strong></code>. This placeholder gets dynamically replaced by the
virtual IP assigned to a client. Therefore <strong>no remote traffic selector must be
configured</strong> on the server when using virtual IPs. This ensures the client&#8217;s
traffic selector is correctly narrowed to the assigned virtual IP (otherwise,
every client would get the same traffic selector assigned, resulting in conflicting
policies).</p>
</div>
<div class="paragraph">
<p>To serve a specific IP address (even if the initiator requests a different address)
to a single client, the following may be configured:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 46.1538%;">
<col style="width: 53.8462%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">IPv4</th>
<th class="tableblock halign-left valign-top">IPv6</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connections.&lt;conn&gt;.pools = &lt;name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connections.&lt;conn&gt;.pools = &lt;name&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pools.&lt;name&gt;.addrs = 10.3.0.5</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pools.&lt;name&gt;.addrs = 2001:db8::1</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To serve <strong>multiple clients</strong>, define an address pool in CIDR notation</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 46.1538%;">
<col style="width: 53.8462%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">IPv4</th>
<th class="tableblock halign-left valign-top">IPv6</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connections.&lt;conn&gt;.pools = &lt;name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connections.&lt;conn&gt;.pools = &lt;name&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pools.&lt;name&gt;.addrs = 10.3.0.0/24</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pools.&lt;name&gt;.addrs = 2001:db8::3.0/24</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>or as an IP address range</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 46.1538%;">
<col style="width: 53.8462%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">IPv4</th>
<th class="tableblock halign-left valign-top">IPv6</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connections.&lt;conn&gt;.pools = &lt;name&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>connections.&lt;conn&gt;.pools = &lt;name&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pools.&lt;name&gt;.addrs = 10.3.0.1-10.3.0.100</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pools.&lt;name&gt;.addrs = 2001:db8::3.1-2001:db8::3.100</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As address pools are explicitly assigned to connections defined in
<a href="../swanctl/swanctlConf.html" class="xref page"><code><strong>swanctl.conf</strong></code></a>, multiple connections can easily
share the same pool.</p>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to use an external pool provided by a plugin by specifying a
pool name to request addresses from (see further below for details on these
backends):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>connections.&lt;conn&gt;.pools = poolname</pre>
</div>
</div>
<div class="paragraph">
<p>This queries registered plugins for an IP address from a pool named <code><strong>poolname</strong></code>
(below are two examples that use the
<a href="../plugins/dhcp.html" class="xref page"><code><strong>dhcp</strong></code></a> and <a href="../plugins/eap-radius.html" class="xref page"><code><strong>eap-radius</strong></code></a>
plugins, respectively).</p>
</div>
<div class="paragraph">
<p>Multiple pools may be defined. Note that the order in which they are queried
primarily depends on the plugin order. Only if pools are provided by the same
backend, does the order defined in <a href="../swanctl/swanctlConf.html" class="xref page"><code><strong>swanctl.conf</strong></code></a>
matter:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>connections.&lt;conn&gt;.pools = v4pool, v6pool
pools.v4pool.addrs = 10.3.0.0/24
pools.v6pool.addrs = 2001:db8::3:0/24</pre>
</div>
</div>
<div class="sect2">
<h3 id="_dns_servers_2"><a class="anchor" href="#_dns_servers_2"></a>DNS servers</h3>
<div class="paragraph">
<p>DNS servers and other attributes can be assigned by plugins (e.g. by the
<a href="../plugins/attr.html" class="xref page"><code><strong>attr</strong></code></a> plugin. In
<a href="../swanctl/swanctlConf.html" class="xref page"><code><strong>swanctl.conf</strong></code></a> each pool in the <code><strong>pools</strong></code>
section may define a list of attributes to assign to clients.</p>
</div>
</div>
<div class="sect2">
<h3 id="_in_memory_backend"><a class="anchor" href="#_in_memory_backend"></a>In-memory backend</h3>
<div class="paragraph">
<p>A non-persistent memory-based backend is the default as described for
<a href="../swanctl/swanctlConf.html" class="xref page"><code><strong>swanctl.conf</strong></code></a>. Such a backend is suitable for
environments where pools are not shared across multiple gateways, server restarts
are rare and direct administration of the pools is not needed (though there are
some provisions for non-destructively reloading pool configurations in a running
server when using <a href="../swanctl/swanctlConf.html" class="xref page"><code><strong>swanctl.conf</strong></code></a>).  To preserve
IP address affinity, the remote IKE identity (as defined for the connection in
question) is used.  This maintains the same IP for a client (most of the time)
even across brief teardowns of connections, approximating the behavior of a DHCP
server without the stricture of lease expiry timers but prevents clients from
intentionally attempting to get a different IP address as there is no
corresponding release mechanism.</p>
</div>
</div>
<div class="sect2">
<h3 id="_database_backend"><a class="anchor" href="#_database_backend"></a>Database backend</h3>
<div class="paragraph">
<p>The <a href="../tools/pool.html" class="xref page"><code><strong>pool</strong></code></a> utility allows easy management of IP address
pools and other attributes, like DNS servers, stored in an SQL database using the
<a href="../plugins/attr-sql.html" class="xref page"><code><strong>attr-sql</strong></code></a> plugin.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dhcp_backend"><a class="anchor" href="#_dhcp_backend"></a>DHCP backend</h3>
<div class="paragraph">
<p>With the <a href="../plugins/dhcp.html" class="xref page"><code><strong>dhcp</strong></code></a> plugin the responder can request
virtual IP addresses for clients from a DHCP server using broadcasts or from a
designated server.</p>
</div>
<div class="paragraph">
<p>DNS/WINS server information is additionally served to clients if the DHCP server
provides such information.</p>
</div>
<div class="paragraph">
<p>The plugin is used by setting</p>
</div>
<div class="literalblock">
<div class="content">
<pre>connections.&lt;conn&gt;.pools = dhcp</pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="../plugins/farp.html" class="xref page"><code><strong>farp</strong></code></a> plugin might also be of use when using the
<a href="../plugins/dhcp.html" class="xref page"><code><strong>dhcp</strong></code></a> plugin. It allows the responder to fake ARP
responses for virtual IP addresses handed out to clients. This lets a road-warrior
act as a client on the local LAN of the responder.</p>
</div>
</div>
<div class="sect2">
<h3 id="_radius_backend"><a class="anchor" href="#_radius_backend"></a>RADIUS backend</h3>
<div class="paragraph">
<p>The <a href="../plugins/eap-radius.html" class="xref page"><code><strong>eap-radius</strong></code></a> plugin can provide virtual IP
addresses assigned to RADIUS clients via the <code><strong>Framed-IP-Address</strong></code> attribute.
<a href="../plugins/eap-radius.html#_radius_attribute_forwarding" class="xref page">Forwarding of other RADIUS attributes</a>
is also supported. The plugin is used by setting</p>
</div>
<div class="literalblock">
<div class="content">
<pre>connections.&lt;conn&gt;.pools = radius</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_multiple_pools_different_backends"><a class="anchor" href="#_multiple_pools_different_backends"></a>Multiple pools, Different Backends</h3>
<div class="paragraph">
<p>If multiple pools are defined from <strong>different</strong> backends, for instance</p>
</div>
<div class="literalblock">
<div class="content">
<pre>connections.&lt;conn&gt;.pools = radius, v4pool
pools.v4pool.addrs = 10.3.0.0/24</pre>
</div>
</div>
<div class="paragraph">
<p>the order in which they are queried for virtual IPs depends on the
<a href="../plugins/pluginLoad.html" class="xref page">plugin load order</a>. In-memory pools are provided by
the <a href="../plugins/vici.html" class="xref page"><code><strong>vici</strong></code></a> plugins. The order <code><strong>pools</strong></code> is irrelevant
unless multiple in-memory pools from the same backend are defined.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../config/IPv6Ndp.html">IPv6 and the Neighbor Discovery Protocol</a></span>
  <span class="next"><a href="mobike.html">MOBIKE</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <a href="https://www.strongswan.org/"> 
     <img src="../../../_/img/strongswan.png" alt="strongSwan Logo" height="100"
        width="153" style="vertical-align:middle;float:left;margin:0px 20px"></a>
  <p>Copyright &copy; 2021-2022
     <a href="mailto:info@.strongswan.org">The strongSwan Team</a> and individual contributors.
     The <a href="https://github.com/strongswan/strongswan-docs">content</a>
     is provided under a <a href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license<p>
  <p>The <a href="https://github.com/strongswan/strongswan-antora">UI</a>
     for this site is derived from the Antora default UI and is licensed under
     the <a href="https://www.mozilla.org/en-US/MPL/2.0/">MPL-2.0</a> license.</p>
 </footer>

<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
